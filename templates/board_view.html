<!DOCTYPE html>
<html lang="en">
<head> 
{% include 'header.html' %}
</head>
<body>
    <div class="container"> 
        <h3> [{{result.id}}] 번 글  </h3> 

        {% if result.parent %}
        <blockquote>
        <p>{{result.parent.article}}</p>
            <footer>
                <cite title="Source Title"><a href="/articles/{{result.parent.id}}}">
                [{{result.parent.id}}]&nbsp;
                {{result.parent.title}}</a>
                </cite>by {{result.parent.email_html}} 
            </footer>
        </blockquote>
        {% endif %} 


        <form role="form">
            <div class="input-group"> 
                <span class="input-group-addon">email</span>
                <input type="email" class="form-control" placeholder="Enter email" name="email" value="{{result.email}}" disabled="True">
            </div> 
            <div class="input-group">
                <span class="input-group-addon">제목</span>
                <input type="text" class="form-control" placeholder="제목" name="title" value="{{result.title}}" disabled="True">
            </div>

            <div class="input-group">
                <span class="input-group-addon">본문</span>
                <textarea class="form-control" rows="3" placeholder="본문" name="article" disabled="True" style="overflow:hidden">{{result.article}}</textarea> 
            </div> 

        </form>

        <div class="button-group">
            <button type="submit" class="btn btn-default delete">삭제</button>
            <button type="submit" class="btn btn-default update">수정</button>
            <button type="submit" class="btn btn-default reply">답글</button>
            <button type="submit" class="btn btn-default list">목록</button>
        </div>
    </div>
    
</body>
<script>
 

    $('button.list').click(function(e) {
        window.location = "/test";
    });

    $('button.reply').click(function(e) {
         
       window.location = "/articles/reply/{{result.id}}";  
    });


    $('button.delete').click(function(e) {

            var id = "{{result.id}}";
            console.log(id)
            $.ajax({
                    type: "DELETE",
                    url: "/articles/" + id,
                    async:false,

                    success: function (result) {
                        alert('삭제되었습니다.');
                         window.location = "/articles"
                    },
                    error: function (textStatus, errorThrown) {
                        alert(JSON.parse(textStatus.responseText).id +'번 글을 삭제못했습니다.');
                    }
            });//ajax
      
    });


     $('button.update').click(function(e) {
       window.location = "/articles/update/{{result.id}}";   
    });
    
</script>

</html>